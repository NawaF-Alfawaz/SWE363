<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
    <link rel="stylesheet" href="../css/main-style.css">
    <link rel="stylesheet" href="../css/products-style.css">

    <title>Products</title>
    <link rel="icon" href="../logo.png">

</head>

<body>
<header>
    <%- include('./partials/nav.ejs') %>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js" integrity="sha384-qKXV1j0HvMUeCBQ+QVp7JcfGl760yU08IQ+GpUo5hlbpg51QRiuqHAJz8+BrxE/N" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/js/all.min.js"></script>
</header>
    
    <div class="container">
        
        <div class="row productsBox">
            <div class="col-md-8">
                <div class="row">

                    <% if(products.length > 0){%>
                        <% products.forEach (product => {%>
                            <% const id = product.id%>
                            <% const title = product.data().title%>
                            <% const price =product.data().price%>
                            <% const type =product.data().type%>
                            <% const url =product.data().url%>
                            <div class="col-md-4">
                                <a href="/products/<%=id%>">
                                    <div class="card" data-type="<%= type %>">
                                        <img class="card-img-top" src="<%= url %>" alt="<%= type %>">
                                        <div class="card-body">
                                            <h5 class="card-title"><%= title %></h5>
                                            <p class="card-text"><%= price %></p>
                                            <p class="card-text">Type: <%= type %></p>
                                        </div>
                                    </div>
                                </a>


                            </div>

                        <%})%>
                    <%} else { %>
                        <div>No Products</div>
                        <%} %>
                </div>
            </div>
            <div class="col-md-4">
                <form class="input-group" action="/products/search" method="POST">
                    <input type="search" class="form-control rounded" id="search-input" placeholder="Search"
                               aria-label="Search" aria-describedby="search-addon" name="search"/>
                    <button type="submit" class="btn btn-outline-primary">Search</button>
                </form>
                <div class="filters">
                    <h3 class="filtersHeadings">Filters</h3>
                    <form action="/products/filter" method="POST">
                        <div class="form-check">
                          <input class="form-check-input filter-type" type="checkbox" value="Keyboards" id="keyboards" name="productType" <% if (filtered.includes('Keyboards')) { %>checked<% } %>>
                          <label class="form-check-label" for="filter-type-keyboards">Keyboards</label>
                        </div>
                      
                        <div class="form-check">
                          <input class="form-check-input filter-type" type="checkbox" value="Parts" id="filter-type-parts" name="productType" <% if (filtered.includes('Parts')) { %>checked<% } %>>
                          <label class="form-check-label" for="filter-type-parts">Parts</label>
                        </div>
                      
                        <div class="form-check">
                          <input class="form-check-input filter-type" type="checkbox" value="Accessories" id="filter-type-accessories" name="productType" <% if (filtered.includes('Accessories')) { %>checked<% } %>>
                          <label class="form-check-label" for="filter-type-accessories">Accessories</label>
                        </div>
                      
                        <hr>
                        <button class="btn btn-primary" type="submit" id="filter-button">Apply Filters</button>
                        <hr>
                      </form>

                      
                </div>
            </div>
        </div>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-qKXV1j0HvMUeCBQ+QVp7JcfGl760yU08IQ+GpUo5hlbpg51QRiuqHAJz8+BrxE/N"
        crossorigin="anonymous"></script>
</body>

</html>